{"EDITOR_STATE":{"allProjectFiles":{"d664d22c-df3e-4eff-9102-c15388f5d475":{"id":"d664d22c-df3e-4eff-9102-c15388f5d475","parent":null,"name":"samplS3Project","type":"DIRECTORY","isDirectory":true,"children":["d934aece-c6c5-421e-9cf3-933b3d240269"],"isRemovable":false,"filePath":"samplS3Project"},"d934aece-c6c5-421e-9cf3-933b3d240269":{"id":"d934aece-c6c5-421e-9cf3-933b3d240269","parent":"d664d22c-df3e-4eff-9102-c15388f5d475","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"samplS3Project/lambda.js","code":"let AWS = require('aws-sdk');\nconst s3 = new AWS.S3();\nexports.handler = function (event, context, callback) {\n\n\tlet encodedImage = JSON.parse(event.body).user_avatar;\n\tlet decodedImage = Buffer.from(encodedImage, 'base64');\n\n\tvar filePath = \"avatars/\" + event.pathParameters.username + \".jpg\"\n\n\ts3.putObject({\n\t\t\"Body\": decodedImage,\n\t\t\"Bucket\": \"upload-to-s3-sample\",\n\t\t\"Key\": filePath\n\t})\n\t\t.promise()\n\t\t.then(data => {\n\t\t\tconsole.log(data);           // successful response\n\t\t   let response = {\n        \"statusCode\": 200,\n        \"headers\": {\n            \"my_header\": \"my_value\"\n        },\n        \"body\": JSON.stringify(data),\n        \"isBase64Encoded\": false\n    };\n        callback(null, response);\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(err, err.stack); // an error occurred\n\t\t\t callback(err, null);\n\t\t});\n\n\n}","triggers":[{"resourceName":"apigusEast1SigmaS3SmapleuploadToS3post","config":{}}],"version":55}},"rootNode":"d664d22c-df3e-4eff-9102-c15388f5d475","openFiles":["d934aece-c6c5-421e-9cf3-933b3d240269"],"currentFileId":"d934aece-c6c5-421e-9cf3-933b3d240269","resources":{"apigusEast1SigmaS3SmapleuploadToS3post":{"name":"apigusEast1SigmaS3SmapleuploadToS3post","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"SigmaS3Smaple","endpointType":"EDGE","resourceMode":0,"resourceName":"upload-to-s3","resourcePath":"/upload-to-s3","restMethod":"POST","proxyIntegration":true,"enableCORS":false,"stageMode":0,"stageName":"prod"},"globallyEditable":true}},"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk":{"name":"@slappforge/slappforge-sdk","version":"0.0.3","notRemovable":true,"types":"\n                    declare class RDSQueryParams {\n    instanceIdentifier: string;\n    query: string;\n    inserts: Array<any>\n}\n\ndeclare namespace SL.AWS {\n    class RDS {\n        query(params: RDSQueryParams, callback: Function, connection: any): void;\n\n        beginTransaction(params: any, callback: Function): void;\n    }\n\n    class SQS {\n        receiveAndDeleteMessages(params: any, filteringCallBack: Function, deleteCallBack: Function, errorCallBack: Function): void;\n    }\n}\n"}}},"lambdaId":"d934aece-c6c5-421e-9cf3-933b3d240269","additionalFiles":[]},"PROJECT_META":{"projectName":"samplS3Project","projectDescription":"","projectVersion":"1.0.0","repoName":"samplS3Project","repoUrl":"https://github.com/Cassendra4/samplS3Project","projectRegion":"us-east-1","lastSave":1519730115279}}